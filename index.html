<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Commit em Master nunca mais: Introdução ao Git Flow | #4 Femug - Projac</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/night.css" id="theme">
  <link rel="stylesheet" href="lib/css/zenburn.css">
  <link rel="stylesheet" href="lib/css/pdf.css">
  <script>
    document.write('<link rel="stylesheet" href="css/print/' + (window.location.search.match(/print-pdf/gi) ? 'pdf' :
      'paper') + '.css" type="text/css" media="print">');
  </script>
  <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h1>Commit em Master nunca mais</h1>
        <h3>Introdução ao Git Flow</h3>
        <p>
          <small>By <a href="https://github.com/gohackfelipe">Felipe Ribeiro</a> / <a href="https://github.com/gohackfelipe">@gohackfelipe</a></small>
        </p>
        <aside class="notes">
          Evangelhista WEB, boas práticas e apaixonado por DevOps.
        </aside>
      </section>
      <section>
        <h2>Me</h2>
        <ul>
          <li class="fragment">Felipe Ribeiro</li>
          <li class="fragment">Pesquisador na TV Globo</li>
          <li class="fragment"><a href="https://twitter.com/gohackfelipe">@gohackFelipe</a> (Twitter)</li>
          <li class="fragment">Javaveiro desde 2007 e Javascripter desde 2014</li>
          <li class="fragment">Usuário Git desde 2014</li>
          <li class="fragment">Usuário GitFlow desde 2015</li>
        </ul>
      </section>
      <section>
        <h2>Mas antes?</h2>
      </section>
      <section>
        <h2>Git Flow é:</h2>
        <blockquote>"Uma coleção de extensões para o Git para prover operações de alto nível para <a href="http://nvie.com/git-model">Vincent Driessen's branching model</a>."</blockquote>
        <p><small>De <a href="https://github.com/nvie/gitflow">https://github.com/nvie/gitflow</a></small></p>
        <aside class="notes">
          * * Prove um wrapper com sequencia de operações para simplificar que fazemos no Git manualmente.
        </aside>
      </section>
      <section>
        <h2>Modelo de Branching</h2>
        <div class="image">
          <img src="images/nvie.png" style="border: none;">
        </div>
        <p><small>De <a href=""></a></small></p>
        <aside class="notes">
          Separamos o código de produção de código de desenvolvimento<br> Encouraja o desenvolvimento orientado a features<br> Permite criar releases
          e taggeamento do código<br> Boa ferramenta para QA e testers
        </aside>
      </section>
      <section>
        <h2>Branches</h2>
        <ul>
          <li class="fragment"><code>master</code>: produção</li>
          <li class="fragment"><code>develop</code>: desenvolvimento</li>
          <li class="fragment"><code>feature/</code>: uma tarefa ou ticket (multiplas)</li>
          <li class="fragment"><code>release/</code>: um branch temporário para testes (somente um)</li>
          <li class="fragment"><code>hotfix/</code>: correções emergenciais</li>
          <li class="fragment"><code>support/</code>: experimental</li>
        </ul>
        <aside class="notes">
          master: stable production code, tagged at the end of each release (stable)<br> develop: stores tested and verified
          development code, awaiting deployment (fairly stable)<br> feature: unstable code relating to a specific task, bug
          or user story<br> release: <br> hotfix: Used to apply urgent fixes to production code
        </aside>
      </section>
      <section>
        <h2>Porquê usar Git Flow?</h2>
        <ul>
          <li class="fragment">Separa o código de produção e desenvolvimento</li>
          <li class="fragment">Flexibilidade</li>
          <li class="fragment">Qualidade de código</li>
          <li class="fragment">Encouraja a Colaboração</li>
          <li class="fragment">Peer code reviews</li>
        </ul>
        <aside class="notes">
          Separa o código em branches diferentes<br> Facilmente trocamos de features<br> Teste continuo
          de features and releases<br> Um ambiente de trabalho com mais fluidez<br> Code reviews
        </aside>
      </section>
      <section>
        <h2>Boas Práticas para o Git Flow</h2>
        <ol>
          <li class="fragment">Nunca, jamais commit diretamente em <code>master</code></li>
          <li class="fragment">Sempre commit de código já testado para <code>develop</code></li>
          <li class="fragment">Tente não realizar commits diretamente em <code>develop</code></li>
          <li class="fragment">Uma feature por user story/bug</li>
          <li class="fragment">Commit, commit com frequencia, e push</li>
        </ol>
      </section>
      <section>
        <h2>Como posso usar o Git?</h2>
        <ul>
          <li class="fragment">CLI
            <ul>
              <li class="fragment"><code>~ $ brew install git-flow</code></li>
              <li class="fragment"><code>~ $ apt-get install git-flow</code></li>
              <li class="fragment"><code>~ $ yum install gitflow</code></li>
            </ul>
          </li>
          <li class="fragment"><a href="http://www.sourcetreeapp.com/">SourceTree</a> (free, cross-platform GUI)</li>
        </ul>
        <aside class="notes">
          You can install and use Git Flow on the command line.<br> There are packages for Ubuntu (apt), Red Hat and CentOS
          (yum) and OS X (Homebrew).<br> You can also download SourceTree from Atlassian which is cross-platform
        </aside>
      </section>
      <section>
        <h2>Precisa de um Help?</h2>
        <pre><code data-trim>
~ $ git flow help
# Exibe um menu padrão para conhecer os comandos

~ $ git flow {subcommand} help
# Exibe um menu para o específico subcomando
          </code></pre>
      </section>
      <section>
        <h2>Inicializando Git Flow</h2>
        <pre><code data-trim>
~ $ git flow init
          </code></pre>
        <aside class="notes">
          Esse comando pode ser executado depois do repositório ter sido criado.
        </aside>
      </section>
      <section>
        <h2>Criando os branches default</h2>
        <pre><code data-trim>
~ $ git flow init

No branches exist yet. Base branches must be created now.
Branch name for production releases: [master]
Branch name for "next release" development: [develop]
          </code></pre>
      </section>
      <section>
        <h2>Configurando prefixos para os branchs</h2>
        <pre><code data-trim>
~ $ git flow init

No branches exist yet. Base branches must be created now.
Branch name for production releases: [master]
Branch name for "next release" development: [develop]

How to name your supporting branch prefixes?
Feature branches? [feature/]
Release branches? [release/]
Hotfix branches? [hotfix/]
Support branches? [support/]
Version tag prefix? []
          </code></pre>
      </section>
      <section>
        <h2>Dica: Automáticamente aceitando os <br>nomes defaults de branchs</h2>
        <pre><code data-trim>
~ $ git flow init -d
# Aceitando a configuração default de nome de branchs.
          </code></pre>
        <aside class="notes">
          <p>Só adicionado o parametro -d no comando.</p>
        </aside>
      </section>
      <section>
        <h2>Features</h2>
        <p><code>$ git flow feature</code></p>
        <ul>
          <li class="fragment"><code>list</code>: lista todas as features</li>
          <li class="fragment"><code>checkout</code>: Mudando de branch ( feature )</li>
          <li class="fragment"><code>start</code>: criando uma nova feature</li>
          <li class="fragment"><code>finish</code>: finalizando uma feature</li>
          <li class="fragment"><code>publish</code>: publicando uma feature para o repositório remoto</li>
          <li class="fragment"><code>pull</code>: obtendo um feature do repositório remoto</li>
        </ul>
        <aside class="notes">
          Podemos pegar exatamente uma feature ou o prefixo.
        </aside>
      </section>
      <section>
        <h2>Iniciando uma nova feature</h2>
        <pre><code data-trim>
~ $ git flow feature start {name}
          </code></pre>
        <div class="fragment">
          <pre><code data-trim>
~ $ git flow feature start foo

Switched to a new branch 'feature/foo'

Summary of actions:
- A new branch 'feature/foo' was created, based on 'develop'
- You are now on branch 'feature/foo'

Now, start committing on your feature. When done, use:

git flow feature finish foo
            </code></pre>
        </div>
        <aside class="notes">
          * Branches from develop
        </aside>
      </section>
      <section>
        <h2>Adicionamos e commitamos as mudanças</h2>
        <pre><code data-trim>
~ $ git add sites/all/modules/contrib/admin_menu
~ $ git commit -m "Added admin_menu"
          </code></pre>
      </section>
      <!--
        <section>
          <h2>Features</h2>
          <pre><code data-trim>
* 267dd3f - (HEAD, feature/foo, develop) Added admin_menu (8 minutes ago) [Oliver Davies]
* f3108db - Initial commit (9 minutes ago) [Oliver Davies]
* 2581201 - (master) Initial commit (9 minutes ago) [Oliver Davies]
          </code></pre>
        </section>
-->
      <section>
        <h2>Recomendado: Rebase a Feature</h2>
        <p>Garante que a feature está up-to-date</p>
        <pre><code data-trim>
~ $ git flow feature rebase

Will try to rebase 'foo'...
First, rewinding head to replay your work on top of it...
Applying: Added admin_menu
          </code></pre>
        <aside class="notes">
          Rewinds the feature, updates from develop and re-applies the feature changes<br> Ensures that the feature code
          is up to date and will merge correctly.
        </aside>
      </section>
      <section>
        <h2>Finalizando uma feature</h2>
        <pre><code data-trim>
~ $ git flow feature finish {name}
          </code></pre>
        <div class="fragment">
          <pre><code data-trim>
~ $ git flow feature finish foo

Switched to branch 'develop'
Updating 5c04d5a..6487134
Fast-forward
...
31 files changed, 5051 insertions(+)
Deleted branch feature/foo (was 6487134).

Summary of actions:
- The feature branch 'feature/foo' was merged into 'develop'
- Feature branch 'feature/foo' has been removed
- You are now on branch 'develop'
            </code></pre>
        </div>
        <p class="fragment">E assim segue...</p>
      </section>
      <section>
        <h2>Releases</h2>
        <p><code>$ git flow release</code></p>
        <ul>
          <li class="fragment"><code>list</code>: lista todos os releases existentes</li>
          <li class="fragment"><code>start</code>: inicia um novo release</li>
          <li class="fragment"><code>finish</code>: finaliza um release</li>
        </ul>
        <aside class="notes">
          Cria uma nova versao do codigo de producao<br> Tento criar um release a cada fim de sprint
        </aside>
      </section>
      <section>
        <h2>Inicia um novo release</h2>
        <pre><code data-trim>
~ $ git flow release start {version}
          </code></pre>
        <div class="fragment">
          <pre><code data-trim>
~ $ git flow release start 2014-03-02.0

Switched to a new branch 'release/2014-03-02.0'

Summary of actions:
- A new branch 'release/2014-03-02.0' was created, based on 'develop'
- You are now on branch 'release/2014-03-02.0'

Follow-up actions:
- Bump the version number now!
- Start committing last-minute fixes in preparing your release
- When done, run:

     git flow release finish '2014-03-02.0'
            </code></pre>
        </div>
        <aside class="notes">
          Tudo pronto. Bugs corrigios<br> Migration OK.
        </aside>
      </section>
      <section>
        <h2>Finalizando um release</h2>
        <pre><code data-trim>
~ $ git flow release finish {version}
          </code></pre>
        <div class="fragment">
          <pre><code data-trim>
  ~ $ git flow release finish 2014-03-02.0

  ...

  Deleted branch release/2014-03-02.0 (was f2aee7d).

  Summary of actions:
  - Latest objects have been fetched from 'origin'
  - Release branch has been merged into 'master'
  - The release was tagged '2014-03-02.0'
  - Release branch has been back-merged into 'develop'
  - Release branch 'release/2014-03-02.0' has been deleted
            </code></pre>
        </div>
        <aside class="notes">
          Merges develop into master<br> Enter a tag message<br> Tags the release with the specified tag<br> Advanced options
          for release tag singing with GPG
        </aside>
      </section>
      <section>
        <h2>Push das mudanças para o repositório remoto</h2>
        <pre><code data-trim>
~ $ git push --all
# Push the changes to the remote branches.

~ $ git push --tags
# Push the tags.
          </code></pre>
      </section>
      <section>
        <h2>Dica: Finaliza o release em apenas um comando</h2>
        <pre><code data-trim>
~ $ git flow release finish -pm {message} {version}
# Insere a mensagem de commit e automáticamente sobe as mudanças.
          </code></pre>
        <div class="fragment">
          <pre><code data-trim>
~ $ git flow release finish -pm 2014-03-02.0 2014-03-02.0
            </code></pre>
        </div>
        <aside class="notes">
          $ git flow release finish -pm "tag message" {branch}
        </aside>
      </section>
      <section>
        <h2>Hotfixes</h2>
        <p><code>$ git flow hotfix</code></p>
        <ul>
          <li class="fragment"><code>list</code>: lista todos os hotfixes</li>
          <li class="fragment"><code>start</code>: inicia um hotfix</li>
          <li class="fragment"><code>finish</code>: finaliza um hotfix</li>
        </ul>
        <aside class="notes">
          Aplica uma mudança emergencial no código de produção<br> Criar o hotfix a partir de Master (por default)<br> Depois de finalizado merge em master e develop
        </aside>
      </section>
      <section>
        <h2>Cria um novo hotfix</h2>
        <pre class="fragment"><code data-trim>
~ $ git flow hotfix start {version}
          </code></pre>
        <pre class="fragment"><code data-trim>
~ $ git flow hotfix start 2014-03-02.2

Switched to a new branch 'hotfix/2014-03-02.2'

Summary of actions:
- A new branch 'hotfix/2014-03-02.2' was created, based on 'master'
- You are now on branch 'hotfix/2014-03-02.2'

Follow-up actions:
- Bump the version number now!
- Start committing your hot fixes
- When done, run:

     git flow hotfix finish '2014-03-02.2'
          </code></pre>
      </section>
      <section>
        <h2>Commit as mudanças</h2>
        <pre><code data-trim>
~ $ git add -A; git commit -m 'Updated .htaccess'
[hotfix/2014-03-02.2 6d04738] Updated .htaccess
 1 file changed, 4 insertions(+), 4 deletions(-)
        </code></pre>
      </section>
      <section>
        <h2>Finalizando o hotfix</h2>
        <pre><code data-trim>
~ $ git flow hotfix finish 2014-03-02.2
Switched to branch 'master'
Merge made by the 'recursive' strategy.
 .htaccess | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)
Switched to branch 'develop'
Merge made by the 'recursive' strategy.
 .htaccess | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)
Deleted branch hotfix/2014-03-02.2 (was 6d04738).

Summary of actions:
- Latest objects have been fetched from 'origin'
- Hotfix branch has been merged into 'master'
- The hotfix was tagged '2014-03-02.2'
- Hotfix branch has been back-merged into 'develop'
- Hotfix branch 'hotfix/2014-03-02.2' has been deleted
          </code></pre>
      </section>
      <section>
        <h2>Resources</h2>
        <ul>
          <li><a href="http://nvie.com/posts/a-successful-git-branching-model/">http://nvie.com/posts/a-successful-git-branching-model/</a></li>
          <li><a href="http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/">http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/</a></li>
          <li><a href="http://danielkummer.github.io/git-flow-cheatsheet/">http://danielkummer.github.io/git-flow-cheatsheet/</a></li>
          <li><a href="https://github.com/nvie/gitflow">https://github.com/nvie/gitflow</a></li>
          <li><a href="https://github.com/nvie/gitflow/wiki">https://github.com/nvie/gitflow/wiki</a></li>
        </ul>
      </section>
      <section>
        <h2>Vamos tentar juntos?</h2>
      </section>
      <section>
        <h2>Perguntas?</h2>
      </section>
      <section>
        <h2>Obrigado</h2>
        <p>Deixa seu feedback no github!</p>
        <ul>
          <li>Slides: <a href="https://github.com/gohackfelipe/git-flow">https://github.com/gohackfelipe/git-flow</a></li>
        </ul>
      </section>
    </div>
    <!-- /.slides -->
  </div>
  <!-- /.reveal -->
  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>
  <script>
    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

      // Parallax scrolling
      // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
      // parallaxBackgroundSize: '2100px 900px',

      // Optional libraries used to extend on reveal.js
      dependencies: [{
          src: 'lib/js/classList.js',
          condition: function () {
            return !document.body.classList;
          }
        },
        {
          src: 'plugin/markdown/marked.js',
          condition: function () {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: 'plugin/markdown/markdown.js',
          condition: function () {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: 'plugin/highlight/highlight.js',
          async: true,
          callback: function () {
            hljs.initHighlightingOnLoad();
          }
        },
        {
          src: 'plugin/zoom-js/zoom.js',
          async: true,
          condition: function () {
            return !!document.body.classList;
          }
        },
        {
          src: 'plugin/notes/notes.js',
          async: true,
          condition: function () {
            return !!document.body.classList;
          }
        }
      ]
    });
  </script>
</body>

</html>